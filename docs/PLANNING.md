# BabySteps 機能追加・改善プラン

このドキュメントは、BabyStepsアプリの機能追加候補と開発環境・依存関係の改善案をまとめたプランニングです。

---

## 1. 現状サマリー

### アプリ構成

| 項目 | 内容 |
|------|------|
| アーキテクチャ | MVVM (Views → ViewModels → Models) |
| UI | SwiftUI |
| データ | SwiftData |
| ターゲット | iOS 26.0+ |
| タブ | タスク / アクティビティ |

### 既存機能

- **タスク管理**: タスク作成、ステップ（チェックボックス）の追加・完了
- **アクティビティ**: GitHub風のカレンダー表示（日別の完了ステップ数）
- **タスク編集**: インライン編集（リマインダー風）
- **データ永続化**: SwiftData

### 開発環境

- XcodeGen によるプロジェクト生成
- GitHub Actions: ビルド・テスト・TestFlight・スクリーンショット・フォーマット
- テスト: プレースホルダーのみ（実質的なテストなし）

---

## 2. 機能追加候補（優先度順）

### 高優先度（ユーザー体験の向上）

| 機能 | 説明 | 工数目安 |
|------|------|----------|
| **タスク・ステップの並び替え** | ドラッグ＆ドロップで順序変更 | 中 |
| **タスク検索・フィルタ** | タイトル検索、完了/未完了フィルタ | 小〜中 |
| **ウィジェット** | ホーム画面に今日の進捗を表示 | 中 |
| **通知・リマインダー** | タスクのリマインド通知 | 中 |

### 中優先度（付加価値）

| 機能 | 説明 | 工数目安 |
|------|------|----------|
| **タスクカテゴリ・タグ** | タスクを分類して管理 | 中 |
| **期限（Due Date）** | タスクに期限を設定 | 小〜中 |
| **統計・サマリー画面** | 週間/月間の完了数、傾向グラフ | 中 |
| **データエクスポート** | CSV/JSONでエクスポート | 小 |

### 低優先度（将来検討）

| 機能 | 説明 | 工数目安 |
|------|------|----------|
| **App Intents** | Siri・ショートカット連携 | 中 |
| **iCloud同期** | 複数デバイス間の同期 | 大 |
| **ダークモード強化** | カスタムテーマ | 小 |

---

## 3. 開発環境・ドキュメントの改善

### 3.1 ドキュメントの不整合修正

| ファイル | 現状 | 修正内容 |
|----------|------|----------|
| `README.md` | Activity機能の記載なし | アクティビティタブの説明を追加 |
| `README.md` | プロジェクト構造が古い | Activity関連ファイルを追加 |
| `SCREENSHOT_GENERATION.md` | iOS 18.5, Xcode 16.4 | iOS 26.2, Xcode 26.0 に更新 |
| `screenshot-config.json` | iOS 18.5, iPhone 16 Pro Max | 実際のワークフローと整合（またはワークフロー側を設定参照に変更） |

### 3.2 テストの強化

- **現状**: `BabyStepsTests.swift` は `testExample` と `testPerformanceExample` のみ
- **改善案**:
  - `TaskViewModel` のユニットテスト（createTask, deleteTask, toggleStep など）
  - `Task` / `TaskStep` モデルのロジックテスト（進捗率計算など）
  - `ActivityView` の集計ロジックテスト

### 3.3 依存関係

- **現状**: 外部パッケージ依存なし（SwiftData, SwiftUI のみ）
- **検討**: 将来的に Widget Extension 追加時は `WidgetKit` を利用（標準フレームワーク）

---

## 4. 推奨アクションプラン

### Phase 1: 基盤整備（1〜2日）

1. **ドキュメント更新**
   - README に Activity 機能を追記
   - SCREENSHOT_GENERATION.md を現行環境に合わせて更新
   - プロジェクト構造を最新化

2. **テスト追加**
   - TaskViewModel の主要メソッドのユニットテスト
   - モデルの進捗計算ロジックのテスト

### Phase 2: 高優先度機能（1〜2週間）

1. **タスク検索・フィルタ** → [実装計画](IMPLEMENTATION_PLAN_SEARCH_FILTER.md)
2. **タスク・ステップの並び替え**（ドラッグ＆ドロップ）
3. **ウィジェット**（オプション）

### Phase 3: 中優先度機能（必要に応じて）

1. タスクカテゴリ・タグ
2. 期限（Due Date）
3. 統計・サマリー画面

---

## 5. 次のステップ

どの方向で進めるか決めるための選択肢：

- **A**: ドキュメント・開発環境の整備から着手
- **B**: 高優先度機能（並び替え・検索）の実装から着手
- **C**: テスト強化から着手
- **D**: 上記の組み合わせ（例: A + C を先に実施）

希望する方針を指定いただければ、その方針に沿った具体的な実装計画とタスク分解を行います。
